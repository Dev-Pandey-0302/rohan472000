name: Daily Joke

on:
  schedule:
    - cron: "* * * * *"

jobs:
  fetch-joke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v3
        with:
          python-version: "3.10"
      - name: Install requests
        run: pip install requests
      - name: Fetch a joke
        run: |
          import requests
          url = "https://v2.jokeapi.dev/joke/Any?type=single"
          response = requests.get(url)
          if response.status_code == 200:
              joke = response.json()["joke"]
              with open("README.md", "a") as readme_file:
                  readme_file.write(f"\n- {joke}")
          else:
              print("Failed to fetch joke")
      - name: Commit and push changes
        run: |
          git config --global user.email "anand00rohan@gmail.com"
          git config --global user.name "rohan472000"
          git pull origin main
          git add README.md
          git commit -m "Add daily joke"
          git push origin main

